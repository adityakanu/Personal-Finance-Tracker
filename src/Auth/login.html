<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Finance Tracker </title>

    <!-- CSS -->
    <link rel="stylesheet" href="login.css">

    <!-- Boxicons CSS -->
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet">

</head>

<body>
    <section class="container forms">
        <!-- Login Form -->
        <div class="form login">
            <div class="form-content">
                <header>Login</header>
                <form action="#">
                    <div class="field input-field">
                        <input type="email" placeholder="Email" class="input">
                    </div>

                    <div class="field input-field">
                        <input type="password" placeholder="Password" class="password">
                        <i class="bx bx-hide eye-icon"></i>
                    </div>

                    <div class="form-link">
                        <a href="#" class="forgot-pass">Forgot password?</a>
                    </div>

                    <div class="field button-field">
                        <button class="e-btn">Login</button>
                    </div>
                </form>

                <div class="form-link">
                    <span>Don't have an account? <a href="#" class="link signup-link">Signup</a></span>
                </div>
            </div>

            <div class="line"></div>


            <div class="media-options">

                <a href="#" class="field google">
                    <img src="../assets/google.svg" alt="" class="google-img">
                    <span>Login with Google</span>
                </a>
                <a href="#" class="field github">
                    <img src="../assets/github.svg" alt="" class="github-img">
                    <span>Login with Github</span>
                </a>
            </div>

        </div>

        <!-- Signup Form -->

        <div class="form signup">
            <div class="form-content">
                <header>Signup</header>
                <form action="#">
                    <div class="field input-field">
                        <input id="email-signup" type="email" placeholder="Email" class="input">
                    </div>

                    <div class="field input-field">
                        <input id="password-signup" type="password" placeholder="Confirm password" class="password">
                        <i class="bx bx-hide eye-icon"></i>
                    </div>

                    <div class="field button-field">
                        <button id="submitData" type="submit">Signup</button>
                    </div>
                </form>

                <div class="form-link">
                    <span>Already have an account? <a href="#" class="link login-link">Login</a></span>
                </div>
            </div>

            <div class="line"></div>

            <div class="media-options">
                <a href="" class="field google">
                    <img src="../assets/google.svg" alt="" class="google-img">
                    <button id="GoogleSignup">Sign up with Google</button>
                </a>
                <a href="#" class="field github">
                    <img src="../assets/github.svg" alt="" class="github-img">
                    <span>Sign up with Github</span>
                </a>
            </div>

        </div>
    </section>

    <!-- JavaScript -->
    <script src="login.js"></script>
    <script src="config.js"></script>
    <!-- Firbase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
        import { signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyABGF1v0w43s84ptrzQJijen35DlpaRL5E",
            authDomain: "finance-tracker-login.firebaseapp.com",
            projectId: "finance-tracker-login",
            storageBucket: "finance-tracker-login.appspot.com",
            messagingSenderId: "568099662115",
            appId: "1:568099662115:web:f78ed70dd961eaf985c496",
            measurementId: "G-F9PBE5F6MK"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        // Authentication credentials

        submitData.addEventListener("click", (e) => {
            var email = document.getElementById("email-signup").value;
            var password = document.getElementById("password-signup").value;


            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    const user = userCredential.user;
                    // ...
                    alert("User signed in");
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // ..
                    alert(errorCode + " also " + errorMessage);
                });
        });

        // Google Signup

        const provider = new GoogleAuthProvider(app);
        GoogleSignup.addEventListener("click", (e) => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    const credential = GoogleAuthProvider.credentialFromResult(result);
                    const token = credential.accessToken;
                    // The signed-in user info.
                    const user = result.user;
                    // IdP data available using getAdditionalUserInfo(result)
                    // ...
                }).catch((error) => {
                    // Handle Errors here.
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    // The email of the user's account used.
                    const email = error.customData.email;
                    // The AuthCredential type that was used.
                    const credential = GoogleAuthProvider.credentialFromError(error);
                    // ...
                });
        });
    </script>
</body>

</html>